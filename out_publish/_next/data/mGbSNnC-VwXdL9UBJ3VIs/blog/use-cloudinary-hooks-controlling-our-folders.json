{"pageProps":{"mdxSource":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Following on from my article about the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://richardhaines.dev/use-cloudinary-hooks-use-search/\"\n  }), \"use-cloudinary - useSearch hook\"), \", this time we'll be streamlining our code and diving into some of whats possible with when manipulating our cloudinary folders.\"), mdx(\"p\", null, \"If we recount what we did last time:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"A user could load their 3 previously saved images on the click of a button\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The search expression told cloudinary that our type of media was image and that we wanted an exact match on the folders\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Our serverless function set the mex results returned, in our case 3\")), mdx(\"p\", null, \"This is a great, simple solution, but there is one problem. If we are stating that our user can only load their last 3 images but at the same time allowing them to save as many images as they like then we put ourselves and our cloudinary accounts credits at risk of being abused. This of course would be no fault of the users, we are the ones setting up the rules by which they should follow. No, alas it is our fault (well mine.... cough cough). Lets refactor a wee bit and see what we can do to make this process better.\"), mdx(\"p\", null, \"Our search function will remain unchanged, our function will still search for an exact folder based on our users name. Our upload function however could do with some work.\"), mdx(\"h2\", null, \"The previous upload serverless function\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const cloudinary = require('cloudinary').v2;\\nconst dotenv = require('dotenv');\\ndotenv.config();\\n\\ncloudinary.config({\\n  cloud_name: process.env.CLOUDINARY_NAME,\\n  api_key: process.env.CLOUDINARY_API_KEY,\\n  api_secret: process.env.CLOUDINARY_API_SECRET,\\n});\\n\\nexports.handler = async (event) => {\\n  const { file } = JSON.parse(event.body);\\n  const res = await cloudinary.uploader.upload(file, {\\n    ...JSON.parse(event.body),\\n  });\\n  return {\\n    statusCode: 200,\\n    body: JSON.stringify(res),\\n  };\\n};\\n\")), mdx(\"p\", null, \"The function takes and parses the passed in event, from which our file to upload is destructured and added to the cloudinary uploader function along with the rest of the image transformations. Cool.\"), mdx(\"h2\", null, \"The super duper upload serverless function\"), mdx(\"p\", null, \"Brace yourselves.....here it comes....\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const cloudinary = require('cloudinary').v2;\\nconst dotenv = require('dotenv');\\ndotenv.config();\\n\\ncloudinary.config({\\n  cloud_name: process.env.CLOUDINARY_NAME,\\n  api_key: process.env.CLOUDINARY_API_KEY,\\n  api_secret: process.env.CLOUDINARY_API_SECRET,\\n});\\n\\n// Upload an image with a max of 3 images in a folder\\nexports.handler = async (event) => {\\n  const { file } = JSON.parse(event.body);\\n  const body = JSON.parse(event.body);\\n  // extract the folder from the public_id\\n  const folder = body.public_id.split('/')[0];\\n\\n  // get the images of the folder and sort them by the uploaded date\\n  const searchRes = await cloudinary.search\\n    .expression(folder)\\n    .sort_by('uploaded_at')\\n    .execute()\\n    .then((searchResult) => searchResult);\\n\\n  // if the folder contains 3 images then delete the oldest one\\n  if (searchRes.resources.length === 3) {\\n    await cloudinary.uploader.destroy(\\n      searchRes.resources[searchRes.resources.length - 1].public_id,\\n    );\\n  }\\n\\n  // upload our new image to the folder\\n  const res = await cloudinary.uploader.upload(file, {\\n    ...JSON.parse(event.body),\\n  });\\n  return {\\n    statusCode: 200,\\n    body: JSON.stringify(res),\\n  };\\n};\\n\")), mdx(\"p\", null, \"We'll go through this step by step to understand whats going on.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"As with all our serverless functions it takes an event. We parse and destructure the file that we want to upload and parse the body. We could do this in one but I like to split it out so its easy to read.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"We extract the folder name from the files public_id, grabbing anything before the forward slash.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"We run our cloudinary search function and pass our folder as the expression to search for.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"We sort the results by their uploaded_at date. This will give us the latest uploads first.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Notice that we have not included a max_results in this search. This means that we will get back all of the images in the folder.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"We then check if the returned arrays length is equal to 3, as we only want to have 3 images max in our folder. If their are 3 images we want to remove the oldest one as we will soon be uploading a new image to the folder.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Cloudinary has a handy destroy function which along with an optional callback accepts the public_id of the image you wish to remove.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"We pass in the last index of the search results array, as that will be our oldest entry.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Finally we upload our new image to the same folder and return that wonderful 200 and the results!\")), mdx(\"p\", null, \"Now we have ensured that our cloudinary credits are safe from those pesky image uploaders. Our folder is set to only accept 3 images. Of course we could choose any number we like. In an up coming tutorial series I'll walk you through creating an authenticated photo album library which will extensively use this hooks library and cloudinary.\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"<p>Following on from my article about the <a href=\"https://richardhaines.dev/use-cloudinary-hooks-use-search/\">use-cloudinary - useSearch hook</a>, this time we&#x27;ll be streamlining our code and diving into some of whats possible with when manipulating our cloudinary folders.</p><p>If we recount what we did last time:</p><style data-emotion-css=\"2yqebn\">.css-2yqebn{list-style-type:bullet;margin-left:1em;margin-top:2px;margin-bottom:2px;}</style><ul role=\"list\" class=\"css-2yqebn\"><li class=\"css-0\">A user could load their 3 previously saved images on the click of a button</li><li class=\"css-0\">The search expression told cloudinary that our type of media was image and that we wanted an exact match on the folders</li><li class=\"css-0\">Our serverless function set the mex results returned, in our case 3</li></ul><p>This is a great, simple solution, but there is one problem. If we are stating that our user can only load their last 3 images but at the same time allowing them to save as many images as they like then we put ourselves and our cloudinary accounts credits at risk of being abused. This of course would be no fault of the users, we are the ones setting up the rules by which they should follow. No, alas it is our fault (well mine.... cough cough). Lets refactor a wee bit and see what we can do to make this process better.</p><p>Our search function will remain unchanged, our function will still search for an exact folder based on our users name. Our upload function however could do with some work.</p><style data-emotion-css=\"15salui\">.css-15salui{font-size:1xl;font-family:heading;margin-top:3px;margin-bottom:3px;}</style><p class=\"chakra-text css-15salui\">The previous upload serverless function</p><pre><pre class=\"prism-code language-js\" style=\"color:#9CDCFE;background-color:#1E1E1E;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px;display:flex;flex-direction:column;width:100%;position:relative\"><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token keyword\" style=\"color:rgb(86, 156, 214)\">const</span><span class=\"token plain\"> cloudinary </span><span class=\"token operator\" style=\"color:rgb(212, 212, 212)\">=</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(220, 220, 170)\">require</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">(</span><span class=\"token string\" style=\"color:rgb(206, 145, 120)\">&#x27;cloudinary&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">)</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token property-access\">v2</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">;</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:rgb(86, 156, 214)\">const</span><span class=\"token plain\"> dotenv </span><span class=\"token operator\" style=\"color:rgb(212, 212, 212)\">=</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(220, 220, 170)\">require</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">(</span><span class=\"token string\" style=\"color:rgb(206, 145, 120)\">&#x27;dotenv&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">)</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">;</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">dotenv</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(220, 220, 170)\">config</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">(</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">)</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">;</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\" style=\"display:inline-block\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">cloudinary</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(220, 220, 170)\">config</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">(</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">{</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">  cloud_name</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">:</span><span class=\"token plain\"> process</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token property-access\">env</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token constant\" style=\"color:rgb(100, 102, 149)\">CLOUDINARY_NAME</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">,</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">  api_key</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">:</span><span class=\"token plain\"> process</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token property-access\">env</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token constant\" style=\"color:rgb(100, 102, 149)\">CLOUDINARY_API_KEY</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">,</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">  api_secret</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">:</span><span class=\"token plain\"> process</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token property-access\">env</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token constant\" style=\"color:rgb(100, 102, 149)\">CLOUDINARY_API_SECRET</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">,</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">}</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">)</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">;</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\" style=\"display:inline-block\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">exports</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token method-variable function-variable method function property-access\" style=\"color:rgb(220, 220, 170)\">handler</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(212, 212, 212)\">=</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:rgb(86, 156, 214)\">async</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">)</span><span class=\"token plain\"> </span><span class=\"token arrow operator\" style=\"color:rgb(212, 212, 212)\">=&gt;</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">{</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"color:rgb(86, 156, 214)\">const</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">{</span><span class=\"token plain\"> file </span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">}</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(212, 212, 212)\">=</span><span class=\"token plain\"> </span><span class=\"token known-class-name class-name\" style=\"color:rgb(78, 201, 176)\">JSON</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(220, 220, 170)\">parse</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">(</span><span class=\"token plain\">event</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token property-access\">body</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">)</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">;</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"color:rgb(86, 156, 214)\">const</span><span class=\"token plain\"> res </span><span class=\"token operator\" style=\"color:rgb(212, 212, 212)\">=</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:rgb(86, 156, 214)\">await</span><span class=\"token plain\"> cloudinary</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token property-access\">uploader</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(220, 220, 170)\">upload</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">(</span><span class=\"token plain\">file</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">,</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">{</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">    </span><span class=\"token spread operator\" style=\"color:rgb(212, 212, 212)\">...</span><span class=\"token known-class-name class-name\" style=\"color:rgb(78, 201, 176)\">JSON</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(220, 220, 170)\">parse</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">(</span><span class=\"token plain\">event</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token property-access\">body</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">)</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">,</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">}</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">)</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">;</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"color:rgb(86, 156, 214)\">return</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">{</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">    statusCode</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(181, 206, 168)\">200</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">,</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">    body</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">:</span><span class=\"token plain\"> </span><span class=\"token known-class-name class-name\" style=\"color:rgb(78, 201, 176)\">JSON</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(220, 220, 170)\">stringify</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">(</span><span class=\"token plain\">res</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">)</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">,</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">}</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">;</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">}</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">;</span></div><style data-emotion-css=\"13tafan\">.css-13tafan{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-transition:all 250ms;transition:all 250ms;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;vertical-align:middle;outline:none;width:auto;justify-self:flex-end;position:absolute;top:0;right:20px;color:brand.crayola.300;margin-top:4px;text-transform:uppercase;font-weight:600;}</style><button type=\"button\" class=\"chakra-button css-13tafan\" aria-label=\"Copy text\" role=\"button\">Grab It</button></pre></pre><p>The function takes and parses the passed in event, from which our file to upload is destructured and added to the cloudinary uploader function along with the rest of the image transformations. Cool.</p><style data-emotion-css=\"15salui\">.css-15salui{font-size:1xl;font-family:heading;margin-top:3px;margin-bottom:3px;}</style><p class=\"chakra-text css-15salui\">The super duper upload serverless function</p><p>Brace yourselves.....here it comes....</p><pre><pre class=\"prism-code language-js\" style=\"color:#9CDCFE;background-color:#1E1E1E;overflow:scroll;margin-top:20px;margin-bottom:20px;padding:16px;display:flex;flex-direction:column;width:100%;position:relative\"><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token keyword\" style=\"color:rgb(86, 156, 214)\">const</span><span class=\"token plain\"> cloudinary </span><span class=\"token operator\" style=\"color:rgb(212, 212, 212)\">=</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(220, 220, 170)\">require</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">(</span><span class=\"token string\" style=\"color:rgb(206, 145, 120)\">&#x27;cloudinary&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">)</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token property-access\">v2</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">;</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:rgb(86, 156, 214)\">const</span><span class=\"token plain\"> dotenv </span><span class=\"token operator\" style=\"color:rgb(212, 212, 212)\">=</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(220, 220, 170)\">require</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">(</span><span class=\"token string\" style=\"color:rgb(206, 145, 120)\">&#x27;dotenv&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">)</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">;</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">dotenv</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(220, 220, 170)\">config</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">(</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">)</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">;</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\" style=\"display:inline-block\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">cloudinary</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(220, 220, 170)\">config</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">(</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">{</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">  cloud_name</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">:</span><span class=\"token plain\"> process</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token property-access\">env</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token constant\" style=\"color:rgb(100, 102, 149)\">CLOUDINARY_NAME</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">,</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">  api_key</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">:</span><span class=\"token plain\"> process</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token property-access\">env</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token constant\" style=\"color:rgb(100, 102, 149)\">CLOUDINARY_API_KEY</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">,</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">  api_secret</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">:</span><span class=\"token plain\"> process</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token property-access\">env</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token constant\" style=\"color:rgb(100, 102, 149)\">CLOUDINARY_API_SECRET</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">,</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">}</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">)</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">;</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\" style=\"display:inline-block\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(106, 153, 85)\">// Upload an image with a max of 3 images in a folder</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">exports</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token method-variable function-variable method function property-access\" style=\"color:rgb(220, 220, 170)\">handler</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(212, 212, 212)\">=</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:rgb(86, 156, 214)\">async</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">)</span><span class=\"token plain\"> </span><span class=\"token arrow operator\" style=\"color:rgb(212, 212, 212)\">=&gt;</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">{</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"color:rgb(86, 156, 214)\">const</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">{</span><span class=\"token plain\"> file </span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">}</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(212, 212, 212)\">=</span><span class=\"token plain\"> </span><span class=\"token known-class-name class-name\" style=\"color:rgb(78, 201, 176)\">JSON</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(220, 220, 170)\">parse</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">(</span><span class=\"token plain\">event</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token property-access\">body</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">)</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">;</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"color:rgb(86, 156, 214)\">const</span><span class=\"token plain\"> body </span><span class=\"token operator\" style=\"color:rgb(212, 212, 212)\">=</span><span class=\"token plain\"> </span><span class=\"token known-class-name class-name\" style=\"color:rgb(78, 201, 176)\">JSON</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(220, 220, 170)\">parse</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">(</span><span class=\"token plain\">event</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token property-access\">body</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">)</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">;</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:rgb(106, 153, 85)\">// extract the folder from the public_id</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"color:rgb(86, 156, 214)\">const</span><span class=\"token plain\"> folder </span><span class=\"token operator\" style=\"color:rgb(212, 212, 212)\">=</span><span class=\"token plain\"> body</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token property-access\">public_id</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(220, 220, 170)\">split</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">(</span><span class=\"token string\" style=\"color:rgb(206, 145, 120)\">&#x27;/&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">)</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">[</span><span class=\"token number\" style=\"color:rgb(181, 206, 168)\">0</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">]</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">;</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\" style=\"display:inline-block\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:rgb(106, 153, 85)\">// get the images of the folder and sort them by the uploaded date</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"color:rgb(86, 156, 214)\">const</span><span class=\"token plain\"> searchRes </span><span class=\"token operator\" style=\"color:rgb(212, 212, 212)\">=</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:rgb(86, 156, 214)\">await</span><span class=\"token plain\"> cloudinary</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token property-access\">search</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(220, 220, 170)\">expression</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">(</span><span class=\"token plain\">folder</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">)</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(220, 220, 170)\">sort_by</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">(</span><span class=\"token string\" style=\"color:rgb(206, 145, 120)\">&#x27;uploaded_at&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">)</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(220, 220, 170)\">execute</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">(</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">)</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(220, 220, 170)\">then</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">(</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">(</span><span class=\"token parameter\">searchResult</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">)</span><span class=\"token plain\"> </span><span class=\"token arrow operator\" style=\"color:rgb(212, 212, 212)\">=&gt;</span><span class=\"token plain\"> searchResult</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">)</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">;</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\" style=\"display:inline-block\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:rgb(106, 153, 85)\">// if the folder contains 3 images then delete the oldest one</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"color:rgb(86, 156, 214)\">if</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">(</span><span class=\"token plain\">searchRes</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token property-access\">resources</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token property-access\">length</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(212, 212, 212)\">===</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(181, 206, 168)\">3</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">{</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:rgb(86, 156, 214)\">await</span><span class=\"token plain\"> cloudinary</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token property-access\">uploader</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(220, 220, 170)\">destroy</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">(</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">      searchRes</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token property-access\">resources</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">[</span><span class=\"token plain\">searchRes</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token property-access\">resources</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token property-access\">length</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(212, 212, 212)\">-</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(181, 206, 168)\">1</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">]</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token property-access\">public_id</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">,</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">)</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">;</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">}</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\" style=\"display:inline-block\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:rgb(106, 153, 85)\">// upload our new image to the folder</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"color:rgb(86, 156, 214)\">const</span><span class=\"token plain\"> res </span><span class=\"token operator\" style=\"color:rgb(212, 212, 212)\">=</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:rgb(86, 156, 214)\">await</span><span class=\"token plain\"> cloudinary</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token property-access\">uploader</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(220, 220, 170)\">upload</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">(</span><span class=\"token plain\">file</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">,</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">{</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">    </span><span class=\"token spread operator\" style=\"color:rgb(212, 212, 212)\">...</span><span class=\"token known-class-name class-name\" style=\"color:rgb(78, 201, 176)\">JSON</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(220, 220, 170)\">parse</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">(</span><span class=\"token plain\">event</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token property-access\">body</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">)</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">,</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">}</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">)</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">;</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"color:rgb(86, 156, 214)\">return</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">{</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">    statusCode</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(181, 206, 168)\">200</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">,</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">    body</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">:</span><span class=\"token plain\"> </span><span class=\"token known-class-name class-name\" style=\"color:rgb(78, 201, 176)\">JSON</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(220, 220, 170)\">stringify</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">(</span><span class=\"token plain\">res</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">)</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">,</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">}</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">;</span><span class=\"token plain\"></span></div><div class=\"token-line\" style=\"color:#9CDCFE\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">}</span><span class=\"token punctuation\" style=\"color:rgb(212, 212, 212)\">;</span></div><style data-emotion-css=\"13tafan\">.css-13tafan{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-transition:all 250ms;transition:all 250ms;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;vertical-align:middle;outline:none;width:auto;justify-self:flex-end;position:absolute;top:0;right:20px;color:brand.crayola.300;margin-top:4px;text-transform:uppercase;font-weight:600;}</style><button type=\"button\" class=\"chakra-button css-13tafan\" aria-label=\"Copy text\" role=\"button\">Grab It</button></pre></pre><p>We&#x27;ll go through this step by step to understand whats going on.</p><style data-emotion-css=\"2yqebn\">.css-2yqebn{list-style-type:bullet;margin-left:1em;margin-top:2px;margin-bottom:2px;}</style><ul role=\"list\" class=\"css-2yqebn\"><li class=\"css-0\">As with all our serverless functions it takes an event. We parse and destructure the file that we want to upload and parse the body. We could do this in one but I like to split it out so its easy to read.</li><li class=\"css-0\">We extract the folder name from the files public_id, grabbing anything before the forward slash.</li><li class=\"css-0\">We run our cloudinary search function and pass our folder as the expression to search for.</li><li class=\"css-0\">We sort the results by their uploaded_at date. This will give us the latest uploads first.</li><li class=\"css-0\">Notice that we have not included a max_results in this search. This means that we will get back all of the images in the folder.</li><li class=\"css-0\">We then check if the returned arrays length is equal to 3, as we only want to have 3 images max in our folder. If their are 3 images we want to remove the oldest one as we will soon be uploading a new image to the folder.</li><li class=\"css-0\">Cloudinary has a handy destroy function which along with an optional callback accepts the public_id of the image you wish to remove.</li><li class=\"css-0\">We pass in the last index of the search results array, as that will be our oldest entry.</li><li class=\"css-0\">Finally we upload our new image to the same folder and return that wonderful 200 and the results!</li></ul><p>Now we have ensured that our cloudinary credits are safe from those pesky image uploaders. Our folder is set to only accept 3 images. Of course we could choose any number we like. In an up coming tutorial series I&#x27;ll walk you through creating an authenticated photo album library which will extensively use this hooks library and cloudinary.</p>","scope":{"title":"use-cloudinary - Controlling our folders","published":true,"category":"First Look","author":"Richard Haines","tags":["cloudinary","use-cloudinary","hooks"],"pin":false,"description":"How to control the cloudinary folder via a serverless function","growth":"mid"}},"frontMatter":{"title":"use-cloudinary - Controlling our folders","published":true,"category":"First Look","author":"Richard Haines","tags":["cloudinary","use-cloudinary","hooks"],"pin":false,"description":"How to control the cloudinary folder via a serverless function","growth":"mid"},"slug":["use-cloudinary-hooks-controlling-our-folders"]},"__N_SSG":true}