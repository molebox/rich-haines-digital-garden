---
title: Notes on react-three-fiber
published: true
category: Animation
author: Richard Haines
tags: [react-three-fiber, three.js]
description: Some notes on using react-three-fiber
growth: baby
---

This is a collection of notes im putting together to better understand how to work with 3D stuff in React. Im writing it as to myself, as that's who it is for, but if others find it useful then that's cool too. But it's not written as a tutorial or anything. Fair warning!

## Setup

Install:

```bash
yarn add react-three-fiber three

```

Set whole page to fill 100% width and height

```css
* {
  box-sizing: border-box;
}

html,
body,
#root {
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
}
```

## What is all this stuff

The Canvas component renders threejs elements, not DOM elements. It takes the whole height and width of it container, so that is why, if you want to do a whole page 3D rendering of something then you need to set the containers (in our case the actual body, as we are only doing one page) width and height to 100%.

We cant directly use HTML elements within the Canvas though there is a way to do that which I will go over later.

Because the Canvas component renders threejs elements we can use stuff like mesh, sphereGeometry and meshStandardMaterial amongst many others. It provides all these via its context to any children rendered within it, translating the threejs API into React components that can be used as normal so we can also pass props to these elements/components too.

#### mesh, geometry and material

A mesh is like the base skeleton an object is made from, like a wire frame or modal.

The geometry is the shape the mesh will take and the material is what will cover the mesh, how it will look. You can use different types of materials which change the way you can interact with the object and how it behaves.

There are lots of different geometry and materials that can be used directly in Canvas like a HTML element. Such as meshStandardMaterial or sphereGeometry.

The attach prop on the geometry and material above attaches the element to its parent, in this case the mesh as the set value. So the sphereGeometry is attached to th4e mesh as the geometry and the meshStandardMaterial is attached to the mesh as the material.

Constructor arguments are passed with the args prop. The sphereGeometry takes a number of constructor args, the first three of which are the radius, width and height. See the [SphereGeometry docs on threejs](https://threejs.org/docs/index.html#api/en/geometries/SphereGeometry) for more information. As an example, the constructor args for the sphere are:

- radius — sphere radius. Default is 1.
- widthSegments — number of horizontal segments. Minimum value is 3, and the default is 8.
- heightSegments — number of vertical segments. Minimum value is 2, and the default is 6.
- phiStart — specify horizontal starting angle. Default is 0.
- phiLength — specify horizontal sweep angle size. Default is Math.PI \* 2.
- thetaStart — specify vertical starting angle. Default is 0.
- thetaLength — specify vertical sweep angle size. Default is Math.PI.

### An example of a ball

```jsx
import React from 'react';
import { Canvas } from 'react-three-fiber';
import { Box } from '@chakra-ui/core';

const ThreeBall = () => {
  return (
    <Box w={1000} h={500} m="0 auto">
      <Canvas>
        <mesh
          visible // object gets render if true
          userData={{ test: 'hello' }} // An object that can be used to store custom data about the Object3d
          position={[0, 0, 2]} // The position on the canvas of the object [x,y,x]
          rotation={[0, 0, 0]} // The rotation of the object
          castShadow // Sets whether or not the object cats a shadow
          // There are many more props.....
        >
          {/* A spherical shape*/}
          <sphereGeometry attach="geometry" args={[1, 16, 16]} />
          {/* A standard mesh material*/}
          <meshStandardMaterial
            attach="material" // How the element should attach itself to its parent
            color="#7222D3" // The color of the material
            transparent // Defines whether this material is transparent. This has an effect on rendering as transparent objects need special treatment and are rendered after non-transparent objects. When set to true, the extent to which the material is transparent is controlled by setting it's .opacity property.
            roughness={0.1} // The roughness of the material - Defaults to 1
            metalness={0.1} // The metalness of the material - Defaults to 0
          />
        </mesh>
        {/*An ambient light that creates a soft light against the object */}
        <ambientLight intensity={0.5} />
        {/*An directional light which aims form the given position */}
        <directionalLight position={[10, 10, 5]} intensity={1} />
      </Canvas>
    </Box>
  );
};
```

The above code renders this ball

<ThreeBall />
